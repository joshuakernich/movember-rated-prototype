<!DOCTYPE html>
<html>
<head>
	<title>CONVERSATIONS by Movember</title>
	<script type="text/javascript" src="./jquery-3.4.1.min.js"></script>
	<script type="text/javascript">
		$(function(){

			var stories = [
				[
					{
						type:'convo',
						convo:[
						{who:"me",d:"Hey man. How are you?"},
						{who:"them",d:"Dude. I'm really struggling. Kinda sucks."},
						{who:"me",d:"Oh, for real? That sucks man."},
						{who:"them",d:"Yeah, But it's alright. I'll be ok."},
						{who:"header",d:"What would you say?"},
						{who:"buttons",list:["Get Started"]}]
					},
					{

						type:'learnings',
						content:"<div style='text-align:center'><div class='logo'></div>\
						<h1 class='product-name'>CONVERSATIONS</h1>\
						<p>Having better Conversations with the men in your life.</p>\
						<button data-target='story-1' class='capsule'>Jump Straight In</button></div>"
					},
				],
				[
					{
						type:'convo',
						convo:[
						{who:"me",d:"Hey man. Come join us. It's chicken night!"},
						{who:"them",d:"I can’t I'm busy."},
						{who:"me",d:"Come on, we are all busy, still got to eat right?"},
						'...',
						{who:"them",d:"Yeah, ok. I won’t eat, but I will hang out."},
						{who:"me",d:"Are you sure you aren’t hungry? I never use all of my credits, swipe my card."},
						{who:"them",d:"I am not a charity case."},
						'...',
						{who:"me",d:"I didn’t think you were. Since we are here, just use mine."},
						{who:"them",d:"No, I can take care of myself. My motto is do for yourself or do without. I have taken care of myself my whole life, that isn’t going to change now."},
						{who:"buttons",list:["Sounds familiar","Other stories"]}
						]

					},
					{

					
						type:'learnings',
						content:"\
						<div class='learning-node watch'>\
						<h1>WATCH</h1>\
						<p><b>Irritability</b> and <b>defensiveness</b> can be clear signs that a man is struggling.</p>\
						</div>\
						<div class='learning-node ask'>\
						<h1>ASK</h1>\
						<p>It's important to find <b>the right time and place</b> to have sensitive conversations. Consider finding a somewhere private, calm, and sensitive to the needs of the individual man. Dont get hung up on everything being perfect. Consider sitting side-by-side, being delicate, and courageous.</p></div>\
						</div>\
						<button class='capsule'>Let's see that play out</button>",
						

					},{
						type:'convo',
						convo:[
							{who:"them",d:"I am not a charity case."},
							{who:"me",d:"I didn’t think you were. Since we are here, just use mine."},
							{who:"them",d:"No, I can take care of myself. My motto is do for yourself or do without. I have taken care of myself my whole life, that isn’t going to change now."},
							{who:'options',
								list:[
									{who:'me',d:"We should talk about this sometime.",f:'Delaying conversation to another, unspecificed time is missing a key opportunity to nurture open conversation.'},
									{who:'me',d:"Mate, you know I'm here for you.",f:'Offering help can be reassuring but it misses the immediate opportunity to '},
									{who:'me',d:"Hey man, want to take a walk?",correct:true,f:'Great Response!'}
									]},
						]
					},
					{
						type:'learnings',
						content:"\
						<div class='learning-node ask'>\
						<h1>ASK</h1>\
						<h2>Open-ended questions</h2>\
						<p><b>Open-ended questions</b> are a great way to stimulate meaningful conversation. This means asking paying close attention, being specific, and inquiring from a place of genuine care.</p>\
						<h2>Model Honest Conversation</h2>\
						<p>Demonstrating your own personal ability to be honest, open, and vulnerable is a great way to help a man open up. Risking exposure of your own struggles helps destigmatize the issues and makes strides toward developing a close relationship.</p>\
						</div>",
					},
					{
						type:'convo',
						convo:[
							{who:'me',d:"So, is something up?"},
							{who:'them',d:"Yeah, I am fine. I am just not a charity case."},
							{who:'me',d:"That’s cool I understand that. This summer, I worked three jobs. I knew I couldn’t ask for help from my family. It was all on me to do. So, yeah, I get it."},
							{who:'them',d:"You do?"},
							{who:'me',d:"Yeah, it was tough."},
							{who:'them',d:"I am going to get this. It’s a money situation, but I do have a plan."},
							{who:'me',d:"Cool, want to tell me about it?"}
						]


					},
					{
						type:'summary',

					},
					{
						type:'intention',
					},
					{
						type:'sequel'
					}
				],
			]

			
			function makeStory(story){

				$('.scroller').empty();
				$('html, body').scrollTop(0);

				var iSegCurrent = 0;
				var $seg;
				
				for(var iSeg in story){
					makeSegment(iSeg);			
				}

				toSeg(0);

				function scrollTo($seg,$thing){
					if(!$thing) $thing = $seg;
					var topOfSeg = $seg.offset().top;
					var bottomOfSeg = topOfSeg + $seg.outerHeight() - $(window).height();
					$('html, body').animate({scrollTop:Math.max(topOfSeg,Math.min(bottomOfSeg,$thing.offset().top - 200))},1000);
				}
				
				function makeConversation($seg,chapter){
					var convo = chapter.convo;
					var $convo = $('<ul class="conversation">').appendTo($seg);

					for( i in convo){
						if(convo[i] == '...'){
							var $btn = $('<li class="break"></li>').appendTo($convo);
						}
						else if(convo[i].who =='header'){
							var $h = $('<li class="header"><h1>'+convo[i].d+'</h1></li>').appendTo($convo);
						} else if(convo[i].who =='buttons'){
							var $btns = $('<li class="buttons">').appendTo($convo);
							for(var b in convo[i].list){
								var $btn = $('<button class="capsule">'+convo[i].list[b]+'</button>').appendTo($btns);
							}

						} else if( convo[i].who =='options' ){
							var $options = $('<li class="options">').appendTo($convo);
							for(var b in convo[i].list){
				
								var $btn = $('<button class="bubble">'+convo[i].list[b].d+'</button>').appendTo($options);
								$btn.data('node',convo[i].list[b]);
		
								$btn.click(function(){
									var node = $(this).data('node');
									$options.hide();
									var $me = $('<li class="'+node.who+'"><p>'+node.d+'</p></li>').appendTo($convo);
									var $me = $('<li class="feedback">'+node.f+'</li>').appendTo($convo);

									if(node.correct){
										var $btns = $('<li class="buttons"><button class="capsule">Now what?</button></li>').appendTo($convo);
										$btns.find('button').click(function(){
											toSeg($('.segment').index($seg)+1);
										})	
									}
								});

							}
						}else {
							var $bubble = $('<li class="'+convo[i].who+'"><p>'+convo[i].d+'</p></li>').appendTo($convo);
						}
					}
				}

				function makeLearnings($seg,chapter){
					$('<div class="segment-content">').appendTo($seg).html(chapter.content);
	
				}

				function toSeg(iSeg){
					console.log(iSeg);
					//scrollTo($('.segment').eq(iSeg));


					function doBit(iBit){
						var stopped = false;
						var allTheStuff = $('.segment').eq(iSeg).find('.conversation li');
						
						if(iBit>0){
							var theBreak = $('.segment').eq(iSeg).find('.conversation li.break').eq(iBit-1);
							var iBreak = allTheStuff.index(theBreak);
							allTheStuff = allTheStuff.slice(iBreak+1);
						}
						
						//scrollTo($('.segment').eq(iSeg), allTheStuff.eq(0));

						allTheStuff.css({opacity:0}).each(function(i){		
							if( !stopped ){
								if($(this).hasClass('them')) $(this).css({left:-50});
								else if ($(this).hasClass('me')) $(this).css({left:50});

								$(this).delay(i*1500).animate({opacity:1,left:0});
							}
							if($(this).hasClass('break') && !stopped){
								stopped = true;
								$(this).click(function(){
									$(this).hide();
									doBit(iBit+1);
								})
							}
						})
					}

					doBit(0);
				}

				function makeSegment(iSeg){
					var seg = story[iSeg];
					
					if(seg.type == 'convo'){
						$seg = $('<div class="segment black">').appendTo('.scroller');
						makeConversation($seg,seg);
					}
					if(seg.type == 'learnings'){
						$seg = $('<div class="segment">').appendTo('.scroller');
						makeLearnings($seg,seg);
					}

					$seg.find('button.capsule').click(function(){
						if( $(this).data('target')){
							var arr = $(this).data('target').split('-');
							if(arr[0] == 'story'){
								makeStory(stories[arr[1]])
							}
						} else{
							toSeg(parseInt(iSeg)+1);
						}
					});
				}
			}

			makeStory(stories[0]);

			$('.modal-nav button').eq(0).addClass('active');
			$('.modal-page').eq(0).show();

			$('.modal-nav button').click(function() {
				var i = $('.modal-nav button').index(this);
				$('.modal-nav button').removeClass('active').eq(i).addClass('active');
				$('.modal-page').hide().eq(i).show();
			})

			$('button.hamburger').click(function(){
				$('.modal-panel').addClass('alive');
			});

			$('.modal .toggle-button').click(function(){
				$('.modal').toggleClass('alive');
				$('.scroller').toggleClass('offset');
			});

			$('.more-convo').click(function(){
				$('.modal').addClass('alive');
				$('.scroller').addClass('offset');
			});

			/*$('button.grid').click(function(){
				$('.scroller').css({left:0});
			});

			$('button.list').click(function(){
				$('.scroller').css({left:'-200vw'});
			});

			$('.story-list li, button.conversations').click(function(){
				$('.scroller').css({left:'-100vw'});
			});*/

			$('.walec > li').click(function(){

				if($(this).hasClass('active')){
					$('.walec > li').removeClass('inactive');
					$('.walec > li').removeClass('active');
				}else{
					$('.walec > li').addClass('inactive');
					$('.walec > li').removeClass('active');
					$(this).removeClass('inactive');
					$(this).addClass('active');
				}
			})
		});
	</script>
	<style type="text/css">
		@font-face {
			font-family: "HeaderFont";
			src: url("./Anton-Regular.ttf");
		}

		@font-face {
			font-family: "BodyFont";
			src: url("./Overpass-Light.ttf");
		}

		@font-face {
		  font-family: BodyFont;
		  src: url("./Overpass-Bold.ttf");
		  font-weight: bold;
		}	

		body{
			font-family: "BodyFont";
			padding: 0px;
			margin: 0px;
		}

		button{
			cursor: pointer;
			outline: none;
		}

		
	
		.segment-content{
			width: 700px;
			max-width: 100%;
			text-align: left;
			margin: auto;
		}

		.segment-content h1{
			font-size: 25px;
		}

		.walec{
			text-align: left;
			display: inline-block;
			border-left: 1px solid #ddd;
			border-right: 1px solid #ddd;
			padding: 0px 50px;
			margin: auto;
			width: 600px;
		}

		.walec > li{
			list-style-type: none;
			padding: 0px;
			margin: 0px;
		}

		.walec h1{
			vertical-align: middle;
		}

		.walec h1 .icon{
			content: "";
			display: inline-block;
			width: 75px;
			height: 75px;
			background: url('./WALEC.png');
			background-size: 100%;
			vertical-align: middle;
			margin-right: 10px;
		}

		.walec > li:nth-of-type(2) h1 .icon{ background-position: 0px -75px; }
		.walec > li:nth-of-type(3) h1 .icon{ background-position: 0px -150px; }
		.walec > li:nth-of-type(4) h1 .icon{ background-position: 0px -225px; }
		.walec > li:nth-of-type(5) h1 .icon{ background-position: 0px -300px; }

		.walec > li{
			position: relative;
			cursor: pointer;
			opacity: 1;
			transition: all 0.3s;
			width: 600px;
		}

		.walec > li:after{
			content: "×";
			position: absolute;
			width: 75px;
			height: 75px;
			right: 0px;
			top: 0px;
			line-height: 75px;
			font-size: 60px;
			text-align: center;
			display: none;
		}

		.walec > li.active:after{
			display: block;
		}

		.walec > li.active .walec-content{
			visibility: visible;
		}

		.walec > li.inactive {
			opacity: 0.05;
		}

		.walec-content{
			width: 550px;
			white-space: normal;
		}

		.walec-content b{
			color: black;
		}

		.walec-content ul{
			list-style-type: none;
			padding-left: 0px;
		}

		.walec-content li:before{
			content: "";
			width: 10px;
			height: 10px;
			border-radius: 10px;
			background: black;
			display: inline-block;
			margin-right: 15px;
			vertical-align: middle;

		}

		.walec > li:nth-of-type(1) .walec-content li:before{ background:#CFC4F6; }

		.segment{

			width: 100%;
			margin: 0px auto;
			color: #333;
			clear: both;
			position: relative;
			overflow: hidden;
			min-height: 100vh;
			display: flex;
			flex-direction: column;
			justify-content: center;

			text-align: center;
			padding: 50px 0px;
			box-sizing: border-box;
		}

		.segment.black{
			background: #222;
		}

		.black h1{
			color: #ccc;
			font-weight: normal;
		}

		.container{
			width: 100vw;
			overflow-x: hidden;
		}

		.scroller{
			position: relative;
			transition: all 0.3s;
			width: 100vw;
			left: 0px;
		}

		.scroller.offset{
			left: 250px;
		}

		.column{
			width: 100vw;
			display: inline-block;
			background: white;
			vertical-align: top;
		}

		.nav{
			text-align: center;
			position: absolute;
			top: 0px;
		}

		.nav button{
			width: 75px;
			height: 75px;
			
			line-height: 75px;
			text-align: center;
			color: #999;
			background: none;
			border: none;
			font-size: 40px;
			
			opacity: 0.5;
			cursor: pointer;
			outline: none;
		}

		.nav button:hover{
			opacity: 0.75;
		}

		.nav button.grid{ background-image: url('./grid.png'); }
		.nav button.conversations{ background-image: url('./conversations.png'); }
		.nav button.list{ background-image: url('./list.png'); }

		button.capsule{
			padding: 15px 30px;
			font-family: inherit;
			border-radius: 100px;
			font-size: large;
			background: none;
			border: 1px solid #333;
			color: inherit;
			cursor: pointer;
			margin-right: 10px;
			
			position: relative;
			white-space: nowrap;
		}

		/*button.capsule:after,button.capsule:before{
			content: "↓";
			position: absolute;
			top: 0px;
			left: 0px;
			padding: 20px 25px;
		}*/

		button.capsule:after{
			left: auto;
			right: 0px;
		}

		button.capsule:hover{
			background: rgba(150,150,150,0.1);
		}

		.story-list{
			list-style-type:none;
			padding: 0px;
			white-space: normal;
			margin: 0px;
		}

		.story-list li{
			display: block;
			margin: 0px 5px 5px 5px;
			
			height: 250px;
			background: #eee;
			cursor: pointer;
			position: relative;
			overflow: hidden;
			background: url('./canteen-drawing-30.jpg');
			background-position: center;
			background-size: 150%;
			filter: grayscale(100%);
		}

		.story-list li.active{

			border: 5px solid orange;
			filter: grayscale(0%);
		}

		.story-list li.active:after{
			content: "NOW PLAYING ▶";
			position: absolute;
			right: 10px;
			bottom: 10px;
			padding: 10px;
			background: white;
			color: #555;
			border: 5px solid orange;
		}

		.conversation{
			width: 400px;
			margin: 0px;
			padding: 0px;
			margin: 0px auto;
			text-align: left;
			white-space: normal;
		}

		.conversation li{
			margin: 2px;
			list-style-type: none;
			padding: 0px;
			margin: 0px;
			margin-bottom: 5px;
			display: block;
			position: relative;
		}

		.conversation li.buttons{
			padding: 20px 0px;
		}

		.conversation li.feedback{

			display: inline-block;
			color: orange;
			border-radius: 10px;
			padding-left: 70px;
			margin-top: 20px;
			background-image: url('./alert.png');
			background-position: left center;
			background-repeat: no-repeat;
			background-size: 50px;
			min-height: 50px;

		}

		.bubble{
			cursor: pointer;
		}

		.bubble, .conversation li p{
			max-width: 80%;
			padding: 20px;
			background: #f5f5f5;
			border-radius: 10px;
			display: inline-block;
			margin: 0px;
			position: relative;
			font-size: inherit;
			border: none;
			font-family: inherit;

		}

		.conversation li p:last-of-type:after{
			content: "";
			width: 0;
			height: 0;
			border-style: solid;
			border-width: 10px 10px 0 0;
			border-color: #f5f5f5 transparent transparent transparent;
			position: absolute;	
			left: 10px;
			bottom: -10px;
		}

		.conversation li.me p:last-of-type:after{
			right: 10px;
			left: auto;
			border-width: 0 10px 10px 0;
			border-color: transparent #91B8C5 transparent transparent;
		}

		.conversation li.me{
			text-align: right;
			transform: rotate(1deg);
		}

		.conversation li.them{
			transform: rotate(-1deg);
		}

		.conversation li.break{
			text-align: center;
			margin: 40px;
		}

		.conversation li.break:after{
			content: "●●●";
			background: rgba(255,255,255,0.1);
			display: inline-block;
			margin: auto;
			font-weight: bold;
			font-size: 15px;
			color: white;
			border: 1px solid white;
			height: 40px;
			line-height: 40px;
			width: 70px;
			text-align: center;
			border-radius: 50px;
			cursor: pointer;
			animation-name: throb;
			animation-duration: 1s;
			animation-iteration-count: infinite;
		}

		.conversation li.header{
			text-align: center;
		}

		@keyframes throb{
			0%{	opacity: 1; }
			50%{	opacity: 0.2; }
			100%{	opacity: 1; }
		}

		.bubble, .conversation li.me p{
			background: #91B8C5;
		}

		.black button.capsule{
			border-color: #999;
			color: #999;
			display: inline-block;
		}

		.modal{
			position: fixed;
			top: 0px;
			left: 0px;
			width: 0px;
		}

		.modal:before{
			content: "";
			position: absolute;
			top:0px;
			left:0px;
			width: 100vw;
			height: 100vh;
			transition: all 0.3s;
			background: rgba(50,50,50,0);
			display: none;
		}

		.modal-panel{
			width: 650px;
			background: white;
			position: relative;
			left: -650px;
			transition: all 0.3s;
			height: 100vh;
			overflow-y: scroll;
		}

		.modal-page{
			display: none;
		}

		.modal.alive .modal-panel{
			left: 0px;
		}

		.modal.alive:before{
			background: rgba(50,50,50,0.5);
			display: block;
		}
		
		.modal.alive .toggle-button{
			left: 650px;
			background: white;
			opacity: 1;
		}

		.modal-nav{
			text-align: center;
			padding-top: 10px;
			color: #999;
		}

		.modal-nav button{
			background: none;
			font: inherit;
			padding: 15px 20px;
			font-size: 20px;
			border: none;
			color: inherit;
		}

		.modal-nav button.active{
			color: black;
			font-weight: bold;
		}

		.modal .toggle-button{
			width: 60px;
			height: 60px;
			
			line-height: 20px;
			text-align: center;
			color: #999;
			background: none;
			border: none;
			font-size: 40px;
	
			cursor: pointer;
			outline: none;
			background: #eee;
			position: absolute;
			left: 0px;
			top: 10px;
			transition: all 0.3s;

			background: none;
			opacity: 0.5
		}

		.logo{
			width: 150px;
			height: 70px;
			background-image: url('./logo.png');
			background-position: center;
			background-size: 100%;
			margin: auto;
		}

		.product-name{
			font-family: "HeaderFont";
			font-size: 70px !important;
			font-weight: normal;
			margin: 0px;
		}

		.learning-node{
			padding-left: 90px;
			position: relative;
			margin-bottom: 20px;
		}

		.learning-node:before{
			content: "";
			display: inline-block;
			width: 75px;
			height: 75px;
			background: url('./WALEC.png');
			background-size: 100%;
			vertical-align: middle;
			margin-right: 10px;
			position: absolute;
			left: 0px;
			top: 0px;
		}

		.learning-node.ask:before{
			background-position: 0% -100%;
		}

		.learning-node h1{
			line-height: 75px;
			margin-bottom: 0px;
			font-size: 2em;
		}

		.learning-node h2, .learning-node p{
			font-weight: normal;
			margin-top: 0px;
		}

	</style>
</head>

<body>
<div class='container'>
	
	<div class='scroller'>
		<!--<div class='column conversation-stream'>
			<div class='segment black'>
				<ul class='conversation'>
					<li class='me'><p>Hey mate, How are you?</p></li>
					<li><p>Oh, so now you're interested!?</p></li>
					<li class='me'><p>What do you mean?</p></li>
					<li><p>How about not ignoring me for weeks because things are going so well for you.</p><br>
						<p>I see you posting about all the cool things you've been up to but haven't invited me once.</p><br>
						<p>And NOW you ask how I am!?</p></li>
				</ul>
				<h1>What would you say?</h1>
				<div>
				<button class='capsule'>Continue this conversation</button><button class='capsule more-convo'>More...</button>
				</div>
			</div>
		</div>-->
	</div>

	<div class="modal">
		
		<button class='toggle-button'>☰</button>
		<div class='modal-panel'>
			<div class='modal-nav'><button>About</button>|<button>Conversations</button>|<button>Learnings</button></div>
			<div class='modal-page'>
				<div style='text-align:center;'>
					<div class='logo'></div>
					<h1 class='product-name'>CONVERSATIONS</h1>
					<p>Having better Conversations with the men in your life.</p>
				</div>
			</div>
			<div class='modal-page'>
				<ul class='story-list'>
					<li class='active'> 5 minutes </li>
					<li ></li>
					<li ></li>
					<li ></li>
				</ul>
			</div>
			<div class='modal-page'>
				<ul class='walec master'>
					<li>
						<h1><div class='icon'></div>WATCH</h1>
						<div class='walec-content'>
							<p>Watch out for signs that the men around you are struggling.</p>
							<p>This includes their
								<ul>
									<li><b>Losing interest</b> in things they care about.</li>
									<li><b>Tiredness</b> or lethargy.</li>
									<li>Taking <b>sick days</b> or otherwise being absent without explanation.</li>
									<li>Seeming <b>irritable</b> or quick to take offence.</li>
									<li>Any <b>unusual changes</b> in their behaviour of feelings.</li>
									<li>Hearing them describe themselves as a <b>burden</b>.</li>
								</ul>
							</p>
						</div>
					</li>
					<li>
						<h1><div class='icon'></div>ASK</h1>
						<div class='walec-content'>
							<p>Asking the <b>right questions</b> at the <b>right time</b> is vital to help a man open up.</p>
							<h2>Consider Appropriateness</h2>
							<ul>
								<li></li>
							</ul>
							<h2>Use Open-ended Conversations</h2>
							<ul>
								<li></li>
							</ul>
							<h2>Model Honest Conversations</h2>
							<ul>
								<li></li>
							</ul>
						</div>
					</li>
					<li>
						<h1><div class='icon'></div>LISTEN</h1>
					</li>
					<li>
						<h1><div class='icon'></div>ENCOURAGE ACTION</h1>
					</li>
					<li>
						<h1><div class='icon'></div>CHECKIN</h1>
					</li>
				</ul>
			</div>
		</div>
	</div>
	
</div>
</body>
</html>