<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
	<title></title>
	<link href="./fontawesome-free-5.13.1-web/css/all.min.css" rel="stylesheet">
	<style type="text/css">

		@font-face {
			font-family: "BodyFont";
			src: url("./Overpass-Light.ttf");
		}

		@font-face {
		  font-family: BodyFont;
		  src: url("./Overpass-Bold.ttf");
		  font-weight: bold;
		}	

		body{
			background: #F7CB45;
			font-family: "BodyFont";
			padding: 0px;
			margin: 0px;
		}



		.convo{
			width: 400px;
			margin: auto;
			text-align: center;
			padding-top: 50px;
			position: relative;
			padding-bottom: 25vh;
		}

		.bit{
			margin-bottom: 10px;
			text-align: left;
			position: relative;
		}

		.bit.them p{
			position: relative;
		}

		.bit.them p:last-of-type:after{
			position: absolute;
			content: "";
			width: 0;
			height: 0;
			border-style: solid;
			left: 10px;
			bottom: -8px;

			border-width: 10px 10px 0px 0;
			border-color: black transparent transparent transparent;
		}

		.header, .share{
			text-align: center;
			font-size: 20px;
			font-weight: normal;
		}

		.them p, .options p{
			display: inline-block;
			padding: 10px;
			background: black;
			color: white;
			margin: 0px;
			margin-bottom: 2px;
		}

		.options:after{
			position: absolute;
			content: "";
			width: 0;
			height: 0;
			border-style: solid;
			right: 10px;
			bottom: -10px;
			left: auto;
			border-width: 0 10px 10px 0;
			border-color: transparent blue transparent transparent;
		}

		.options.fail:after{
			border-color: transparent #ff4400 transparent transparent;
		}

		.options{
			text-align: right;
			position: relative;
		}

		.options p{
			background: white;

			border: 1px solid blue;
			display: block;
			margin-left: 20%;
			text-align: left;
			color: blue;
			border-bottom: none;
			margin-bottom: 0px;
			cursor: pointer;
		}

		.options p:hover{
			background: blue;
			color: white;
		}

		.options p.selected{
			background: blue;
			color: white;
		}

		.options p.selected.fail{
			background: #ff4400;
			border-color: #ff4400;
		}

		.options p:last-of-type{
			border-bottom: 1px solid blue;
		}

		.options p.grayed{
			background: #eee;
			color: #ccc;
		}

		.feedback{
			background: rgba(255,255,255,0.5);

			padding: 1px 15px;
			text-align: left;
			margin: 15px 0px;
			border: 1px solid black;

			padding: 0px;
			border: none;
			background: none;
		}

		.feedback b{
			background: black;
			color: #F7CB45;
			padding: 0px 5px;
			font-weight: normal;
		}

		button{
			width: 100%;
			font-family: inherit;
			font-size: inherit;
			background: white;
			border: 1px solid blue;
			color: blue;
			padding: 5px;
		}

		.bg{
			position: fixed;
			right: 0px;
			top: 10vh;
			height: 80vh;
			width: 35vw;
			background-size: cover;
			background-position: left center;
			background-repeat: no-repeat;
			background-image: url('https://conversations.movember.com/static/assets/images/image-63e5166d68b6f880f7b8407215f3a6e294c2bd69-1000x1000-png');
			opacity: 1;
			transition: all 0.5s;
			transition-timing-function: cubic-bezier(0.5,0.5,0.5,1.5);
		}

		.bg.left{
			background-image: url('https://conversations.movember.com/static/assets/images/image-66a9b8a444422868dc2aa8d671ffef05a220dc5d-1000x1000-png');
			background-position: right center;
			right: auto;
			left: 0px;
		}

		.bg.hidden{
			transition-timing-function: cubic-bezier(0.5,-0.5,0.5,0.5);
		}

		.bg.right.hidden{
			right: -5vw;
			opacity: 0;
		}

		.bg.left.hidden{
			left: -5vw;
			opacity: 0;
		}




		.feedback h1{
			font-weight: bold;
			font-size:20px;
			margin-bottom: 0px;
			color: blue;
			text-align: center;
		}

		.feedback h1.fail{
			color: #ff4400;
		}


		.story{
			display: inline-block;
			height: 150px;
			width: 100%;
			background: rgba(255,255,255,0.1);
			margin: 0px;
			margin-bottom: 2px;
			
			box-sizing: border-box;
			border: 1px solid blue;
			position: relative;
			color: blue;
			cursor: pointer;
		}

		.story.selected{
			background: blue;
			color: white;
		}

		.story:before{
			content: "";
		}

		.story .bg-story{
			position: absolute;
			right: 0px;
			height: 95%;
			width: 50%;
			top: 5%;
			background-size: 220%;
			background-repeat: no-repeat;
			background-position: top left;
		}

		.story .bg-story.left{
			left: 0px;
			right: auto;
			background-position: top right;
		}

		.story h1{
			position: absolute;
			top: 5px;
			left: 80px;
			
			
			right: 0px;
			font-size: 20px;
			line-height: 25px;
			margin-bottom: 0px;
			padding-left: 10px;

			text-align: left;
			font-weight: normal;
			border-left: 2px solid blue;
		}

		.story.selected h1{
			border-left-color: white;
		}

		.story:nth-of-type(1) .bg-story.left{
			background-position-y: -115px;
			background-image: url('https://conversations.movember.com/static/assets/images/image-66a9b8a444422868dc2aa8d671ffef05a220dc5d-1000x1000-png');
		}

		.story:nth-of-type(1) .bg-story{
			background-image: url('https://conversations.movember.com/static/assets/images/image-63e5166d68b6f880f7b8407215f3a6e294c2bd69-1000x1000-png');
		}

		.bg.left.n2, .story:nth-of-type(2) .bg-story.left{
			background-image: url('https://conversations.movember.com/static/assets/images/image-f34dd8fc826c2c2535da51855a488dfe35cc2337-1080x1080-png');
		}

		.bg.right.n2, .story:nth-of-type(2) .bg-story{
			background-image: url('https://conversations.movember.com/static/assets/images/image-cd42a130ffe5cd739029fcfa885e6ab4ce8f8c08-1080x1080-png');
		}

		.bg.left.n3, .story:nth-of-type(3) .bg-story.left{
			background-image: url('https://conversations.movember.com/static/assets/images/image-9723dfdd46c616f37dc130c33b42edfd72673e58-1000x1000-png');
		}

		.bg.right.n3, .story:nth-of-type(3) .bg-story{
			background-image: url('https://conversations.movember.com/static/assets/images/image-49df9364688f3b428ceac6093b52265d131ca125-1000x1000-png');
		}

		.remember:before {
			content: "";
			height: 25px;
			width: 400px;
			background-image: url('./divider.png');
			background-size: 100%;
			margin-bottom: 10px;
			display: block;
		}
		
		.remember, .intention {
			margin-bottom: 10px;
		}

		.intention{
			padding-top: 15px;
			border-top: 2px solid black;
		}

		.remember .alec-list{
			margin-bottom: 15px;
		}

		.intention h1, .remember h1{
			font-size: 20px;

			margin: 0px;
			padding: 0px;
			margin-bottom: 5px;
		}

		.intention b, .remember b{
			
			color: #F7CB45;
			background: black;
			padding: 0px 5px;
			font-weight: normal;
		}

		.share button, .intention button{
			width: 32%;
			margin-right: 1%;
		}

		.intention button.selected{
			background: blue;
			color: white;
			outline: none;
		}

		.share{
			color: blue;
		}



	</style>
	<script type="text/javascript" src="./jquery-3.4.1.min.js"></script>
	<script type="text/javascript" src="./story-work.js"></script>
	<script type="text/javascript" src="./story-isolation.js"></script>
	<script type="text/javascript" src="./story-lonely.js"></script>
	<script type="text/javascript">

		$(function(){

			var iBit = -1;

			var bitsIntro = [
				{is:'header',p:["<img width=300 src='logo-black.svg'/>"]},
				{is:'them',p:["I really don't think things will get better.","What's the point?"]},
				{is:'header',p:['What would you say?']},
				{is:'question',
					iCorrect:-1,
					p:[
					"There is no point to life, ultimately.",
					"2020 is a write-off so far as I'm concerned.",
					"Let's just all agree that life sucks.",
				],f:[
					"You may be right. But this guy is struggling. Let's find some way to <b>open up the conversation</b>.",
					"You may be right. But this guy is struggling. Let's find some way to <b>open up the conversation</b>.",
					"You may be right. But this guy is struggling. Let's find some way to <b>open up the conversation</b>.",
				]},
				{is:'header',p:['Conversations can be tough.']},
				{is:'header',p:['We all get stuck sometimes.']},
				{is:'header',p:["So let's have a conversation."]},
				{
					is:'story-list',
					p:['Jobless &<br>Uncertain','Isolated &<br>Bored','Frustrated &<br>Lonely']
				}
			]

			var bitsSegway = [
				{
					is:'header',
					p:['Great.'],
				},
				{
					is:'share'
				},
				{
					is:'story-list',
					p:['Finding Work &<br>Uncertain','Isolated &<br>Bored','Frustrated &<br>Lonely']
				}
			]

			var bits2 = [

			]

			var bits = bitsIntro;

			function scroll(){
				$("html, body").animate({ scrollTop: $(document).height() }, 1000);
				$('.convo').css({ 'min-height': $('.convo').height() });
			}

			function nextBit() {
				iBit++;
				var bit = bits[iBit];

				var $bit = $('<div class="bit '+bit.is+'">').appendTo($('.convo'));

				var $ps = $bit;

				if(bit.is == 'question'){
					if(!bit.tried) bit.tried = [];
					$ps = $('<div class="options">').appendTo($bit);
					for(var i in bit.p) $('<p class='+bit.tried[i]+'>'+bit.p[i]+'</p>').appendTo($ps);
				} else if(bit.is == 'story-list'){
					for(var i in bit.p){
						$('<di class="story"><div class="bg-story left"></div><div class="bg-story"></div><h1>'+bit.p[i]+'</h1></div>').appendTo($ps);
					}
				} else if (bit.is=='remember') {
					$ps = $('<div class="alec-list">').appendTo($ps);
					$('<h1>Remember</h1>').appendTo($ps);
					for(var i in bit.p){
						$('<li>'+bit.p[i]+'</li>').appendTo($ps);
					}
					$('<button>Continue</button>').appendTo($bit);
				} else if (bit.is=='intention') {

					$('<h1>In the next few days</h1>').appendTo($ps);
					for(var i in bit.p){
						$('<p>'+bit.p[i]+'</p>').appendTo($ps);
					}

					$('<h1>Are you ready to walk the talk?</h1><p>How confident do you feel in having this conversation?</p>').appendTo($bit);

					$('<button>Not yet</button>').appendTo($bit);
					$('<button>Getting there</button>').appendTo($bit);
					$("<button>I'm ready</button>").appendTo($bit);

				} else if(bit.is=='share'){
					$('<button><i class="far fa-share-square"></i> Share</button>').appendTo($bit);
				} else {
					for(var i in bit.p){
						$('<p>'+bit.p[i]+'</p>').appendTo($ps);
						if(i<(bit.p.length-1)) $ps.append('<br>');
					}
				}

				
				scroll();

				// all of the interaction happens here
				if(bit.is == 'question'){

					$bit.css({opacity:0,left:50,top:50}).animate({opacity:1,top:0,left:0});

					$bit.find('p').click(function(){
						$(this).addClass('selected');

						var index = $bit.find('p').index(this);
						
						bit.tried[index] = 'grayed';

						$bit.find('p').hide();
						$(this).show();

						var feedbackHeader = (index==bit.iCorrect?'<h1><i class="fas fa-thumbs-up"></i> Good choice.</h1>':'<h1 class="fail"><i class="fas fa-exclamation-circle"></i> We can do better</h1>')
						$('<div class="feedback">'+feedbackHeader+'<p>'+bit.f[index]+'</p></div>').appendTo($bit);

						if(index!=bit.iCorrect){
							$ps.addClass('fail');
							$(this).addClass('fail');
							if(bit.iCorrect>-1) iBit--;
						}
						
						$('<button>Continue</button>').appendTo($bit).click(function(){
							$(this).hide();
							setTimeout( nextBit, 1000 );
						})

						scroll();

						$bit.find('.feedback').css({opacity:0}).animate({opacity:1});
						$bit.find('.feedback p, .feedback ul').css({opacity:0}).delay(1000).animate({opacity:1});
						$bit.find('button').css({opacity:0}).delay(3000).animate({opacity:1});
					});
				} else if (bit.is == 'them' ){
					$bit.find('p').each(function(i){
						$(this).css({opacity:0,left:-50,top:50}).delay(i*1000).animate({opacity:1,top:0,left:0});
					})
					setTimeout( nextBit, i*1000 + 2000 );

				} else if(bit.is == 'story-list'){					

					$('.bg').addClass('hidden');

					$bit.find('.story').click(function(){
						
						var me = $(this);

						var index = $bit.find('.story').index(me);

						me.addClass('selected');
						$bit.find('.story').hide();
						me.show();

						iBit = -1;
						bits = [storyWork,storyIsolation,storyLonely][index];

						$('.bg').removeClass('hidden n1 n2 n3');
						$('.bg').addClass('n'+(index+1));

						setTimeout( nextBit, 2000 );

					});
				} else if(bit.is == 'remember'){
					$bit.find('button').click(function() {
						$(this).hide();
						setTimeout( nextBit, 1000 );
					})

					$bit.css({opacity:0,top:50}).animate({opacity:1,top:0});

				} else if(bit.is == 'intention'){
					$bit.find('button').click(function() {
						$(this).addClass('selected');
						bits = bitsSegway;
						iBit = -1;
						setTimeout( nextBit, 1000 );
					})

					$bit.css({opacity:0,top:50}).animate({opacity:1,top:0});

				} else {
					$bit.css({opacity:0,left:150}).animate({opacity:1,left:-20}).animate({opacity:1,left:0});
					setTimeout( nextBit, 1500 );
				}
			}

			nextBit();
		})
		
	</script>
</head>
<body>
	<div class='bg left'></div>
	<div class='bg right'></div>
	<div class='convo'>
	</div>
</body>
</html>